<div class="flex">
  <!-- Posts section (left side) -->
  <div class="w-2/3 pr-4">
    {{#if selectedPost}}
      <!-- Display single post with comments -->
      <h2 class="text-2xl font-bold mb-4">{{selectedPost.title}}</h2>
      <article class="bg-white shadow-md rounded-lg p-4 mb-4">
        <p class="text-sm text-gray-600">by
          {{selectedPost.user.username}}
          on
          {{format_date selectedPost.createdAt}}</p>
        <p class="mt-2">{{selectedPost.content}}</p>
        {{#if is_owner}}
          <button
            id="edit-post-btn"
            class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 mt-4"
          >
            Edit Post
          </button>
        {{else}}
          <p class="text-gray-600 mt-4">You cannot edit this post.</p>
        {{/if}}
      </article>

      <!-- Add a comment section -->
      {{#if logged_in}}
        <section class="mt-8">
          <h3 class="text-lg font-semibold mb-2">Add a Comment</h3>
          <form id="new-comment-form" class="space-y-4" action="/api/">
            <div>
              <textarea
                name="content"
                placeholder="Your comment"
                required
                class="w-full px-3 py-2 border rounded-md h-32"
              ></textarea>
            </div>
            <button
              type="submit"
              class="bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"
            >
              Submit Comment
            </button>
          </form>
        </section>
      {{/if}}

      <!-- Display comments -->
      <section class="mt-8">
        <h3 class="text-lg font-semibold mb-2">Comments</h3>
        {{#each selectedPost.comments}}
          <div class="bg-gray-100 p-4 rounded-lg mb-4">
            <p>{{this.content}}</p>
            <p class="text-sm text-gray-600">by
              {{this.user.username}}
              on
              {{format_date this.createdAt}}</p>
          </div>
        {{else}}
          <p class="text-gray-600">No comments yet.</p>
        {{/each}}
      </section>
    {{else}}
      <!-- Display recent posts -->
      <h2 class="text-2xl font-bold mb-4">Recent Posts</h2>
      {{#each posts}}
        <article class="bg-white shadow-md rounded-lg p-4 mb-4">
          <h3 class="text-xl font-semibold">{{this.title}}</h3>
          <p class="text-sm text-gray-600">by
            {{this.user.username}}
            on
            {{format_date this.createdAt}}</p>
          <p class="mt-2">{{this.content}}</p>
          <a href="/post/{{this.id}}" class="text-blue-500 hover:underline">View
            Post</a>
        </article>
      {{else}}
        <p class="text-gray-600">No blog posts yet!</p>
      {{/each}}
    {{/if}}
  </div>

  <!-- Sidebar (right side) -->
  <div class="w-1/3 pl-4">
    {{#if logged_in}}
      <div class="bg-gray-100 p-4 rounded-lg mb-4">
        <h2 class="text-xl font-bold mb-2">Welcome, {{user.username}}!</h2>
        <section>
          <h3 class="text-lg font-semibold mb-2">Create New Post</h3>
          <form
            id="new-post-form"
            action="/api/posts"
            method="post"
            class="space-y-4"
          >
            <div>
              <input
                type="text"
                name="title"
                placeholder="Post Title"
                required
                class="w-full px-3 py-2 border rounded-md"
              />
            </div>
            <div>
              <textarea
                name="content"
                placeholder="Post Content"
                required
                class="w-full px-3 py-2 border rounded-md h-32"
              ></textarea>
            </div>
            <button
              type="submit"
              class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"
            >
              Create
            </button>
          </form>
        </section>
      </div>
    {{else}}
      <div class="bg-gray-100 p-4 rounded-lg mb-4">
        <p>Please
          <a href="/login" class="text-blue-500 hover:underline">log in</a>
          or
          <a href="/signup" class="text-blue-500 hover:underline">sign up</a>
          to create a new post or comment.</p>
      </div>
    {{/if}}

    <div class="bg-gray-100 p-4 rounded-lg">
      <h2 class="text-xl font-bold mb-2">All Posts</h2>
      {{#each posts}}
        <div class="mb-2">
          <a
            href="/post/{{this.id}}"
            class="text-blue-500 hover:underline"
          >{{this.title}}</a>
        </div>
      {{/each}}
    </div>
  </div>
</div>